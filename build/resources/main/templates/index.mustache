{{>layout/header}}

<!-- nav bar -->
<nav class="navbar fixed-top navbar-expand-md navbar-light bg-white">
    <div class="container-xxl">
        <a href="#intro" class="navbar-brand">
            <span class="fw-bold text-secondary">
                HabitRacer
            </span>
        </a>
        <!-- Toggle button for mobile nav -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#main-nav" aria-controls="main-nav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- navbar links -->
        <div class="collapse navbar-collapse justify-content-end align-center" id="main-nav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#races">Your Races</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#topics">About HabitRacer</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#contact">Get in Touch</a>
                </li>
                <!-- display Log-out / Sign-in depending on status -->
                {{#user}}
                    <li class="nav-item d-inline mt-sm-2 mt-md-0 ms-md-2">
                        <a class="btn btn-secondary" href="/logout"><i class="bi bi-person-circle"></i> Log-out</a>
                    </li>
                {{/user}}
                {{^user}}
                    <li class="nav-item d-inline mt-sm-2 mt-md-0 ms-md-2">
                        <a class="btn btn-secondary" href="/oauth2/authorization/google"><i class="bi bi-google"></i> Sign-in</a>
                    </li>
                {{/user}}
            </ul>
        </div>
    </div>
</nav>

<!-- main image and intro text -->
<section id="intro">
    <div class="container-lg my-5">
        <div class="row justify-content-center align-items-center">
            <div class="col-md-5 text-center text-md-start">
                <h1>
                    <div class="display-2">The F1</div>
                    <div class="display-5 text-muted">amongst Habit Trackers</div>
                </h1>
                <p class="lead my-4 text-muted">Why just <em>track</em> when you can race?</p>
                <a href="#races" class="btn btn-secondary btn-lg">Start</a>
            </div>
            <div class="col-md-5 text-center d-none d-md-block">
                <img src="/images/race-track.png" alt="race-track" class="img-fluid">
            </div>
        </div>
    </div>
</section>

<!-- your races -->
<section id="races" class="bg-light mt-5">
    <div class="container-lg">
        <div class="text-center">
            <h2>Your Races</h2>
            <p class="lead text-muted">{{^user}}Sign-in to compete in exciting races. {{/user}}Choose a race and claim the pole.</p>
        </div>
        <div class="row my-5 align-items-center justify-content-center">
            <!-- Display sample races for non-authenticated users -->
            {{^user}}
                <div class="col-8 col-lg-4 col-xl-3 mb-3">
                    <div class="card border-0">
                        <div class="card-body text-center py-4">
                            <h4 class="card-title">Sprint to Disneyland</h4>
                            <p class="lead card-subtitle">Competitor: Jackson K</p>
                            <p class="display-5 my-4 text-primary fw-bold">T-53</p>
                            <p class="card-text mx-5 text-muted d-none d-lg-block">Competing for a wager of "Two tickets to Disneyland Paris in March 2022 ðŸŽ¢"</p>
                            <a href="/race/sample" class="btn btn-outline-primary btn-lg mt-3">View Race</a>
                        </div>
                    </div>
                </div>
                <div class="col-8 col-lg-4 col-xl-3 mb-3">
                    <div class="card border-0">
                        <div class="card-body text-center py-4">
                            <h4 class="card-title">Racing for Health</h4>
                            <p class="lead card-subtitle">Competitor: Joseph Choi</p>
                            <p class="display-5 my-4 text-primary fw-bold">T-49</p>
                            <p class="card-text mx-5 text-muted d-none d-lg-block">Competing for a wager of "Laundry and dish-washing duties for an entire month ðŸ˜±"</p>
                            <a href="/race/sample" class="btn btn-outline-primary btn-lg mt-3">View Race</a>
                        </div>
                    </div>
                </div>
                <div class="col-8 col-lg-4 col-xl-3 mb-3">
                    <div class="card border-0">
                        <div class="card-body text-center py-4">
                            <h4 class="card-title">For the Gainz</h4>
                            <p class="lead card-subtitle">Competitor: Phyllis V</p>
                            <p class="display-5 my-4 text-primary fw-bold">T-25</p>
                            <p class="card-text mx-5 text-muted d-none d-lg-block">Competing for a wager of "A 200L refrigerator from Bob Vance Refrigeration ðŸ’µ"</p>
                            <a href="/race/sample" class="btn btn-outline-primary btn-lg mt-3">View Race</a>
                        </div>
                    </div>
                </div>
            {{/user}}
            <!-- Display ongoing races for authenticated users -->

            {{#raceList}}
                <div class="col-8 col-lg-4 col-xl-3 mb-3">
                    <div class="card border-0">
                        <div class="card-body text-center py-4">
                            <h4 class="card-title">{{raceName}}</h4>
                            <p class="lead card-subtitle">Competitor: {{competitorName}}</p>
                            <p class="display-5 my-4 text-primary fw-bold">T-{{daysUntilEnd}}</p>
                            <p class="card-text mx-5 text-muted d-none d-lg-block">Competing for a wager of "{{wager}}"</p>
                            <a href="/race/{{id}}" class="btn btn-outline-primary btn-lg mt-3">Enter Race</a>
                        </div>
                    </div>
                </div>
            {{/raceList}}
        </div>
    </div>
    <!-- divider -->
    <div class="row align-items-center justify-content-center mb-5">
        <div class="col-8"><hr></div>
    </div>
    <!-- join or start a race -->
    <div class="container-lg">
        <div class="text-center">
            <p class="lead text-muted">Alternatively, begin a new race and start building habits.</p>
        </div>
        <div class="row text-center justify-content-center">
            <div class="col-2">
                <a href="/race/save" class="btn btn-outline-primary btn-lg mt-3"><i class="bi bi-speedometer"></i> Start a Race</a>
            </div>
            <div class="col-2">
                <!-- modal trigger -->
                <button class="btn btn-outline-primary btn-lg mt-3" data-bs-toggle="modal" data-bs-target="#join-race-modal"><i class="bi bi-speedometer2"></i> Join a Race</button>
            </div>
        </div>
    </div>
</section>

<!-- modal -->
<div class="modal fade" id="join-race-modal" tabindex="-1" aria-labelledby="modal-title" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modal-title">Join a Race</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Have you been challenged to a Habit Race? Enter the race code you have been provided to join the race.</p>
                <label for="raceId" class="form-label">Race Code:</label>
                <input type="number" id="raceId" class="form-control" placeholder="e.g. 74283">
                {{#user}}<input type="hidden" id="sndUserId" value="{{id}}">{{/user}}
            </div>
            <div class="modal-footer">
                {{#user}}<button class="btn btn-primary" id="btn-redirect-to-join">Join</button>{{/user}}
                {{^user}}
                    <p>Please sign-in before joining a race.</p>
                    <a class="btn btn-secondary" href="/oauth2/authorization/google"><i class="bi bi-google"></i> Sign-in</a>
                {{/user}}
            </div>
        </div>
    </div>
</div>

<!-- contact -->
<section id="contact">
    <div class="container-lg">
        <div class="text-center">
            <h2>Get in Touch</h2>
            <p class="lead">Questions to ask? Reach me directly through my contacts.</p>
            <p><a href="https://github.com/binchoi" style="color: black"><i class="bi bi-github"></i></a> binchoi</p>
            <p><i class="bi bi-envelope-fill"></i> binchoi@u.yale-nus.edu.sg</p>
        </div>
    </div>
</section>

{{>layout/footer}}